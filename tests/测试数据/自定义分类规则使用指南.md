# 自定义分类规则使用指南

## 功能介绍

自定义分类规则允许你为经常访问的网站添加个性化的分类规则，提高分类的准确性。这些规则会优先于系统默认规则执行。

## 规则类型

### 1. 域名匹配规则
- **用途**: 根据网站域名进行分类
- **匹配方式**: 包含匹配（部分匹配即可）
- **示例**:
  - `my-blog.com` → 匹配 `https://my-blog.com/article/123`
  - `company.internal` → 匹配 `https://wiki.company.internal/docs`

### 2. 关键词匹配规则
- **用途**: 根据页面标题中的关键词进行分类
- **匹配方式**: 包含匹配（不区分大小写）
- **示例**:
  - `购物` → 匹配标题包含"购物"的页面
  - `API文档` → 匹配标题包含"API文档"的页面

## 使用场景

### 场景1: 公司内部网站
```
规则类型: 域名匹配
规则值: company.com
分类: 工作与生产力
```

### 场景2: 个人博客
```
规则类型: 域名匹配
规则值: myblog.dev
分类: 新闻与资讯
```

### 场景3: 特定内容类型
```
规则类型: 关键词匹配
规则值: 教程
分类: 学术与教育
```

### 场景4: 购物相关
```
规则类型: 关键词匹配
规则值: 商品详情
分类: 生活与消费
```

## 规则优先级

分类规则的执行顺序（从高到低）：

1. **自定义规则** ⭐ 最高优先级
   - 域名匹配规则
   - 关键词匹配规则

2. **系统默认规则**
   - 预定义域名映射
   - 预定义关键词映射

3. **AI智能分类**
   - 当规则覆盖率低时触发

4. **其他类别**
   - 无法分类的条目

## 最佳实践

### ✅ 推荐做法

1. **为常用网站添加域名规则**
   ```
   example-tool.io → 编程与开发
   my-company.com → 工作与生产力
   ```

2. **为特定内容添加关键词规则**
   ```
   "在线课程" → 学术与教育
   "产品评测" → 新闻与资讯
   ```

3. **使用具体的规则值**
   ```
   ✅ github.io
   ❌ github (太宽泛，可能误匹配)
   ```

### ❌ 避免的做法

1. **过于宽泛的规则**
   ```
   ❌ .com → 某个分类 (会匹配太多网站)
   ```

2. **重复的规则**
   ```
   ❌ 同时添加 github.com 和 github.io 到同一分类
   ```

3. **冲突的规则**
   ```
   ❌ github.com → 编程与开发
   ❌ github.com → 工作与生产力
   ```

## 管理规则

### 添加规则
1. 打开设置页面
2. 滚动到"自定义分类规则"部分
3. 选择分类、规则类型，输入规则值
4. 点击"添加"按钮

### 删除规则
1. 在规则列表中找到要删除的规则
2. 点击"删除"按钮
3. 确认删除

### 查看规则效果
1. 添加规则后保存设置
2. 返回仪表盘进行数据分析
3. 在分析结果中查看"自定义规则状态"

## 故障排除

### 规则不生效？
1. 确认已保存设置
2. 刷新仪表盘页面
3. 重新进行数据分析

### 分类结果不准确？
1. 检查规则值是否正确
2. 确认规则类型选择是否合适
3. 查看是否有冲突的规则

### 想要更精确的匹配？
1. 使用更具体的域名规则
2. 使用更精确的关键词
3. 结合多个规则覆盖不同情况

## 技术细节

- 规则存储在浏览器本地存储中
- 规则匹配不区分大小写
- 域名匹配使用包含匹配（substring）
- 关键词匹配在页面标题中查找
- 自定义规则优先级最高，会覆盖系统默认规则