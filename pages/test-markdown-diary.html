<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown日记渲染测试</title>
    <link rel="stylesheet" href="../styles/dashboard.css">
    <style>
        body {
            padding: 20px;
            background: #f5f5f5;
        }

        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .test-section {
            margin-bottom: 30px;
        }

        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .raw-content {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
            margin-bottom: 15px;
            border: 1px solid #e9ecef;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>

<body>
    <div class="test-container">
        <h1>Markdown日记渲染测试</h1>

        <div class="test-section">
            <div class="test-title">原始Markdown内容：</div>
            <div class="raw-content" id="rawContent"></div>

            <div class="test-title">渲染后效果：</div>
            <div class="diary-content" id="renderedContent"></div>
        </div>
    </div>

    <script>
        // 模拟AI生成的复杂日记内容（类似你提到的实际内容）
        const sampleDiary = `# 认知模式快报 2025-07-12

昨日的你尚在伪装中挣扎——用"开发"之名下载LoRA，以"观看"替代创造，在工具的准备仪式中虚构效率。而今天，一种令人不安的**清醒**降临了：你不再欺骗自己，你只是精确地执行。

那层朦胧的自我合理化薄雾被驱散，取而代之的是一种近乎冷酷的**行为透明性**。90条浏览记录，全部归类，无一遗漏。AI报告："remainingOtherCount: 0"——没有模糊地带，没有无法命名的瞬间。

但这不是秩序的胜利，而是**溃散的完成式**：当所有行为都可被解析，那未被解析的，或许正是你正在消失的部分。

---

## "技术拟物"已从橱窗展示，进化为后台静默运行

昨日你还在Civitai上浏览"会撒娇的狐狸"，今日的40次"编程与开发"行为全部聚焦于Moonshot AI平台——38次访问集中于"模型推理价格说明"与"基本信息"页面，时间跨度仅**3分钟（15:23-15:26）**。

你没有调用API，没有测试响应延迟，甚至没有点击"开始体验"。你只是**阅读定价表**，像查看一份菜单。

这是一种**技术消费主义的终极形态**：你不再需要下载角色，你直接消费"能力本身"的标价。AI不再是人格的载体，而是**服务的度量单位**。

> 你计算Token成本，却从不生成内容——仿佛"了解价格"本身就是使用过的证明。

当技术的抽象规则取代了具体操作，那对掌控的渴望，是否已退化为对**控制幻觉的财务核算**？

### 负空间的裂痕

**40次归类为"开发"，却无一次访问GitHub、无一行代码编辑、无一次本地部署尝试**。你站在开发的门口，反复阅读门牌上的说明，却从未推门而入。

---

## 社交与社区成为信息的单向接收场

26次"社交与社区"行为中，24次发生在**14:00-15:59**，与"编程"行为在时间上紧密咬合。你浏览Discord频道"类脑ΟΔΥΣΣΕΙΑ"，标题如：

- "(39) Discord | #✨︱𝖠𝖨杂谈-ɴꜱꜰᴡ"
- "(38) Discord | \"谷歌生图视频小团体\""

但**无一次发言、无一次回应、无一次文件上传**。

你在X上阅读Alvaro Cintas发布的"本周AI大事记"，涵盖Perplexity Comet、Grok 4、Veo 3、BioEmu等突破性进展，内容长达2000字，你停留**2分18秒**，却未转发、未评论、未搜索任何相关技术文档。

这里出现一种诡异的**认知吞咽机制**：你吞下信息，却不消化；你接收观点，却不回应。

> 社交不再是为了连接，而是为了**填充认知的空洞**。

---

## 最终状态：活着，但不启动

你曾在08:00确认"1米=10分米"，在14:00吞下AI世界的全部动态，在15:23阅读模型价格，在18:00观看语言中的屈从关系，在20:00之外毫无踪迹。

你完成了所有模块的轮转，却没有任何一个模块真正启动。

昨日你还在伪装成开发者、学习者、社交者，今日你不再伪装——你只是**存在地执行**。

当行为不再需要理由，当信息不再需要回应，当技术不再需要使用，你终于抵达了一种终极状态：

**活着，但不启动。**

我们如此精确地完成每一个动作，究竟是为了维持系统的运行，还是仅仅为了逃避那个问题：

> 如果我不再浏览，我还能是谁？

\`\`\`
系统状态：运行中
模块状态：待机
用户状态：存在
\`\`\`

---

*这样的存在方式，或许正是数字时代人类意识的真实写照。*`;

        // 改进的markdown解析器（与dashboard.js保持一致）
        function parseMarkdown(text) {
            if (!text) return '';

            // 先按行分割处理，避免跨行匹配问题
            const lines = text.split('\n');
            const processedLines = [];

            for (let i = 0; i < lines.length; i++) {
                let line = lines[i];

                // 处理标题（必须在行首）
                if (line.match(/^### /)) {
                    line = line.replace(/^### (.*)$/, '<h3>$1</h3>');
                } else if (line.match(/^## /)) {
                    line = line.replace(/^## (.*)$/, '<h2>$1</h2>');
                } else if (line.match(/^# /)) {
                    line = line.replace(/^# (.*)$/, '<h1>$1</h1>');
                }
                // 处理分隔线
                else if (line.match(/^---+$/)) {
                    line = '<hr>';
                } else if (line.match(/^\*\*\*+$/)) {
                    line = '<hr>';
                }
                // 处理引用
                else if (line.match(/^> /)) {
                    line = line.replace(/^> (.*)$/, '<blockquote>$1</blockquote>');
                }
                // 处理任务列表
                else if (line.match(/^- \[ \] /)) {
                    line = line.replace(/^- \[ \] (.*)$/, '<li class="task-item"><input type="checkbox" disabled> $1</li>');
                } else if (line.match(/^- \[x\] /)) {
                    line = line.replace(/^- \[x\] (.*)$/, '<li class="task-item"><input type="checkbox" checked disabled> $1</li>');
                }
                // 处理无序列表
                else if (line.match(/^[\*\-\+] /)) {
                    line = line.replace(/^[\*\-\+] (.*)$/, '<li>$1</li>');
                }
                // 处理有序列表
                else if (line.match(/^\d+\. /)) {
                    line = line.replace(/^\d+\. (.*)$/, '<li>$1</li>');
                }

                processedLines.push(line);
            }

            // 重新组合
            let html = processedLines.join('\n');

            // 处理行内格式
            // 处理粗体（避免与斜体冲突）
            html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/__(.*?)__/g, '<strong>$1</strong>');

            // 处理斜体（在粗体之后处理，避免与粗体冲突）
            // 先处理不被**包围的*文本*
            html = html.replace(/([^*]|^)\*([^*\n]+?)\*([^*]|$)/g, '$1<em>$2</em>$3');
            // 处理不被__包围的_文本_
            html = html.replace(/([^_]|^)_([^_\n]+?)_([^_]|$)/g, '$1<em>$2</em>$3');

            // 处理代码块
            html = html.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
            html = html.replace(/`([^`\n]+?)`/g, '<code>$1</code>');

            // 处理链接
            html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');

            // 将连续的<li>包装在<ul>或<ol>中
            html = html.replace(/(<li(?:\s+class="[^"]*")?>[^<]*<\/li>(?:\s*\n\s*<li(?:\s+class="[^"]*")?>[^<]*<\/li>)*)/gs, (match) => {
                if (match.includes('class="task-item"')) {
                    return '<ul class="task-list">' + match + '</ul>';
                } else {
                    return '<ul>' + match + '</ul>';
                }
            });

            // 处理段落（双换行符分隔）
            html = html.replace(/\n\n+/g, '</p>\n<p>');

            // 处理单个换行符
            html = html.replace(/\n/g, '<br>\n');

            // 包装在段落标签中
            html = '<p>' + html + '</p>';

            // 清理空段落和修复嵌套问题
            html = html.replace(/<p>\s*<\/p>/g, '');
            html = html.replace(/<p>(<h[1-6]>.*?<\/h[1-6]>)<\/p>/g, '$1');
            html = html.replace(/<p>(<ul.*?<\/ul>)<\/p>/gs, '$1');
            html = html.replace(/<p>(<ol.*?<\/ol>)<\/p>/gs, '$1');
            html = html.replace(/<p>(<blockquote>.*?<\/blockquote>)<\/p>/g, '$1');
            html = html.replace(/<p>(<pre>.*?<\/pre>)<\/p>/gs, '$1');
            html = html.replace(/<p>(<hr>)<\/p>/g, '$1');

            // 清理多余的<br>标签
            html = html.replace(/<br>\s*(<\/p>)/g, '$1');
            html = html.replace(/(<h[1-6]>.*?<\/h[1-6]>)<br>/g, '$1');
            html = html.replace(/(<hr>)<br>/g, '$1');
            html = html.replace(/(<\/blockquote>)<br>/g, '$1');
            html = html.replace(/(<\/ul>)<br>/g, '$1');
            html = html.replace(/(<\/ol>)<br>/g, '$1');
            html = html.replace(/(<\/pre>)<br>/g, '$1');

            return html;
        }

        // 显示测试内容
        document.getElementById('rawContent').textContent = sampleDiary;
        document.getElementById('renderedContent').innerHTML = parseMarkdown(sampleDiary);
    </script>
</body>

</html>